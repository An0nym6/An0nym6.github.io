<!DOCTYPE html>
<html lang="zh-cmn-Hans">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>操作系统期中复习笔记</title>
  <meta name="description" content="<p>这门课使用了斯坦福的 Pintos 项目，我觉得是一个很不错且有趣的项目。</p>

">

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.0/css/all.css" integrity="sha384-Mmxa0mLqhmOeaE8vgOSbKacftZcsNYDjQzuCOm6D02luYSzBG8vpaOykv9lFQ51Y" crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/scss/main.css">
  <link rel="canonical" href="/2020/03/04/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%9C%9F%E4%B8%AD%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0.html">
  <link rel="shortcut icon" href="/favicon.ico">

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <script src="/assets/js/av-min.js"></script>
  <script src='https://unpkg.com/valine/dist/Valine.min.js'></script>
</head>

  <body>
    <nav class="navbar navbar-expand-sm navbar-light bg-light">
  <div class="container">
    <a href="/">
      <img class="avatar" src="/assets/img/avatar.png" alt="">
      <span class="header-title">Random Thoughts</span>
    </a>

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="nav navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/archives/">归档</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about/">关于</a>
        </li>
    </div>
  </div>
</nav>

    <main aria-label="Content">
      <div>
        <div class="container">
  <div class="row">
    <div class="col-md-8 padding-top">
      <article itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <div class="title" itemprop="name headline">操作系统期中复习笔记</div>
    <div class="date" itemprop="datePublished">2020 年 03 月 04 日</div>
  </header>

  <div class="padding-top" itemprop="articleBody">
    <p>这门课使用了斯坦福的 Pintos 项目，我觉得是一个很不错且有趣的项目。</p>

<h4 id="chapter-1-2-3-4-5">Chapter 1, 2, 3, 4, 5</h4>

<p>🍺</p>

<h4 id="chapter-6">Chapter 6</h4>

<ol>
  <li>Common atomic hardware instructions:
    <ul>
      <li>Test-and-Set: Return the original value of the passed in parameter, set the value of parameter to true;</li>
      <li>Compare-and-Swap: Return the original value of the passed in parameter, set the value of parameter to new_value if the old value equals expected.</li>
    </ul>
  </li>
  <li>Monitor:
    <ul>
      <li>With Mesa semantics, when a waiting thread’s resource becomes available, it is moved from the signal queue back to the entry queue. The currently executing thread finishes executing, and the other thread will eventually be dispatched from the entry queue;</li>
      <li>One risk of this implementation is that by the time that the unblocked process begins to execute again, the event it was waiting for has passed and the resource could be again unavailable. The cycle may repeat;</li>
      <li>Most common, e.g. Java synchronized objects.</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/An0nym6/Images/master/Spring%202020/1.png" width="50%" /></p>
  </li>
</ol>

<h4 id="chapter-7">Chapter 7</h4>

<p>🍺</p>

<h4 id="chapter-8">Chapter 8</h4>

<ol>
  <li>Conditions for deadlock:
    <ul>
      <li>Mutual exclusion, hold and wait, no preemption, circular wait;</li>
      <li>Invalidating circular wait is most common: Assign each resource a unique number, and resources must be acquired in order.</li>
    </ul>
  </li>
  <li>Banker algorithm:
    <ul>
      <li>Safe state =&gt; no deadlocks; Unsafe state =&gt; possible deadlocks; Avoidance =&gt; ensure safe state;</li>
      <li>https://www.geeksforgeeks.org/bankers-algorithm-in-operating-system-2/.</li>
    </ul>
  </li>
</ol>

<h4 id="synchronization-supplement">Synchronization Supplement</h4>

<ol>
  <li>Different locks:
    <ul>
      <li>Spin lock: Busy wait, must shared among processors, not FIFO or even bounded wait;</li>
      <li>Ticket lock: Just one atomic instruction to block; Spins on not-atomic instruction, FIFO; But it spins on shared memory;</li>
      <li>MCS lock: FIFO, locks are acquired and released in O(1) time, spinning is bounded by time it takes to add to queue.</li>
    </ul>
  </li>
</ol>

<h4 id="homework-1">Homework 1</h4>

<ol>
  <li>Resources can only be access in supervisor mode:
    <ul>
      <li>Hardware: I/O devices like disk drive, network board, keyboard, …</li>
      <li>Data structure: PCB (process control block), disk buffer, …</li>
    </ul>
  </li>
  <li>Context switch:
    <ul>
      <li>Process: Register context virtual memory context;</li>
      <li>Thread: Register context.</li>
    </ul>
  </li>
  <li>Difference between “policy” and “mechanism”:
    <ul>
      <li>A policy is basically a goal. It is something the operating system is designed to achieve;</li>
      <li>The mechanism is the implementation that achieves this goal;</li>
      <li>Example: It might be policy to run higher priority processes first. The mechanism for doing this might be to have one list for each priority class and always running processes from the highest priority non-empty list.</li>
    </ul>
  </li>
  <li>“process” and “program”: A program is something written by a programmer. It is a specification. A process is an instance of a program in execution. A process is a running model. A program is a description of a model.</li>
  <li>Key states in PCB &amp; TCB:
    <ul>
      <li>PCB states: Status (running, runnable, etc), priority, process id, parent process id, accounting information, signal state, file state, and virtual memory state;</li>
      <li>TCB states: Register state, attached/detached, scheduling priority, accounting information, thread id.</li>
      <li>PCB and TCB don’t share any key state because it’s no necessary.</li>
    </ul>
  </li>
  <li>Gang scheduling: It is the identification of a group of threads as a group that should be run in parallel whenever possible. This is normally done when the threads are highly collaborative and communicate with each other a lot. By running them at the same time, the communication is fluid. Running them in series would result in a lot of blocking for communication while waiting for other threads in the gang to run.</li>
  <li>Multiprogramming: Make system interactive &amp; allow I/O and CPU overlap.</li>
  <li>Multi-level feedback queues:
    <ul>
      <li>A scheduling algorithm that uses multiple queues of different priorities. Jobs in lower-priority queues get executed only if there’s no job in higher-priority queues. Jobs can be moved from one queue to another according to their “feedbacks” and some rules, and each queue can have different scheduling algorithms (round-robin, FCFS, etc);</li>
      <li>Advantages: Processes might slowly be promoted as they age. They also might get rewarded and promoted for giving up the CPU soon after dispatch.</li>
    </ul>
  </li>
</ol>

<h4 id="homework-2">Homework 2</h4>

<ol>
  <li>An example of monitor:
    <ul>
      <li>Worth noticing that there’s no lock because the lock is intrinsic within the monitor construct. The language is offering us the mutual exclusion guarantee and hiding it from us.</li>
    </ul>

    <pre><code class="language-Java"> Monitor MultiPurpose {
   cv allThreeCV, anyTwoCV, anyOneCV, stageCV;
   bool section0, section1, section2 = false;

   Entry mproom event_begin(event e) {
     switch (e) {
       case PLAY:
         while (section0 || section1 || section2)
           allThreeCV.wait();
         return {true, true, true};
       ...
     }
   }

   Entry void event_end(event e, mproom allocated_sections) {
     if (allocated_sections.section0) section0 = false;
     ...
     if (!section0 &amp;&amp; !section1 &amp;&amp; !section2)
       allThreeCV.signal();
     ...
   }
 }
</code></pre>
  </li>
  <li>The wait() and signal() operation upon a condition variable:
    <ul>
      <li>wait() is taking mutex as a parameter because: The mutex ensures that the check of the predicate and the wait are atomic. The logic of wait is such that the mutex will be freed before blocking but reacquired before waking up;</li>
      <li>signal() is not because: Whatever is changing state needs to protect that state. The signal is simply signalling. Any internal state that is changed, i.e. wait list, is protected internally.</li>
    </ul>
  </li>
  <li>Kernel data structures:
    <ul>
      <li>Kernel pages are mapped into all processes into the same address space so they are accessible in the same way, with the same page numbers and virtual addresses regardless of which page table is loaded;</li>
      <li>The pages are marked as requiring privilege in the page table’s per-process metadata. This is enforced by the MMU. A fault is generated if an access is attempted without sufficient privilege.</li>
    </ul>
  </li>
</ol>

  </div>
  <!-- 引入评论系统 -->
  <div>
  <div class="divider"></div>
  <div class="comment-title">评论</div>
  <div id="comment"></div>
</div>

<script>
  new Valine({
    el: '#comment',
    appId: '3j4RFjcpQQ8wNfd7DBwLm4vt-gzGzoHsz',
    appKey: 'T5aGxAv2Mx0b1avzokvvpbYD',
    placeholder: '添加评论',
  })
</script>

</article>

    </div>
    <div class="col-md-4 padding-top">
      <div class="card tags">
        <div class="card-header card-title">
          标签
        </div>
        <div class="card-body">
          
          
          
            
              
            
              
            
              
            
              
            
              
                <div class="chip">
                  <a class="tag" href="/archives/tag/学习笔记">学习笔记</a>
                  <span class="count" style="background-color: hsl(208, 80%, 42%);">18</span>
                </div>
              
            
              
            
              
            
          
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          
            
              
            
              
            
              
            
              
                <div class="chip">
                  <a class="tag" href="/archives/tag/阅读">阅读</a>
                  <span class="count" style="background-color: hsl(208, 80%, 57%);">3</span>
                </div>
              
            
              
            
              
            
              
                <div class="chip">
                  <a class="tag" href="/archives/tag/求职">求职</a>
                  <span class="count" style="background-color: hsl(208, 80%, 57%);">3</span>
                </div>
              
            
          
            
              
            
              
                <div class="chip">
                  <a class="tag" href="/archives/tag/网络">网络</a>
                  <span class="count" style="background-color: hsl(208, 80%, 58%);">2</span>
                </div>
              
            
              
            
              
            
              
            
              
            
              
            
          
            
              
                <div class="chip">
                  <a class="tag" href="/archives/tag/博客">博客</a>
                  <span class="count" style="background-color: hsl(208, 80%, 59%);">1</span>
                </div>
              
            
              
            
              
                <div class="chip">
                  <a class="tag" href="/archives/tag/旅行">旅行</a>
                  <span class="count" style="background-color: hsl(208, 80%, 59%);">1</span>
                </div>
              
            
              
            
              
            
              
                <div class="chip">
                  <a class="tag" href="/archives/tag/算法">算法</a>
                  <span class="count" style="background-color: hsl(208, 80%, 59%);">1</span>
                </div>
              
            
              
            
          
        </div>
      </div>
      <div class="card new-essays">
        <div class="card-header card-title">
          最新文章
        </div>
        <ul class="list-group list-group-flush">
            
              
                <li class="list-group-item">
                  <a href="/2020/04/29/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0.html">操作系统期末复习笔记</a>
                </li>
              
            
              
                <li class="list-group-item">
                  <a href="/2020/03/04/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%9C%9F%E4%B8%AD%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0.html">操作系统期中复习笔记</a>
                </li>
              
            
              
                <li class="list-group-item">
                  <a href="/2019/12/12/%E5%9B%BE%E5%83%8F%E4%B8%8E%E8%A7%86%E9%A2%91%E5%A4%84%E7%90%86%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0.html">图像与视频处理期末复习笔记</a>
                </li>
              
            
              
                <li class="list-group-item">
                  <a href="/2019/12/10/%E8%BD%AF%E4%BB%B6%E9%AA%8C%E8%AF%81%E4%B8%8E%E6%B5%8B%E8%AF%95%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0.html">软件验证与测试期末复习笔记</a>
                </li>
              
            
              
                <li class="list-group-item">
                  <a href="/2019/12/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%AF%BC%E8%AE%BA%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0.html">计算机系统导论期末复习笔记</a>
                </li>
              
            
              
                <li class="list-group-item">
                  <a href="/2019/11/27/Python-%E7%9A%84%E5%A5%87%E5%A6%99%E7%94%A8%E6%B3%95.html">Python 的奇妙用法</a>
                </li>
              
            
              
                <li class="list-group-item">
                  <a href="/2019/11/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93.html">计算机网络知识总结</a>
                </li>
              
            
              
                <li class="list-group-item">
                  <a href="/2019/10/28/%E8%BD%AF%E4%BB%B6%E9%AA%8C%E8%AF%81%E4%B8%8E%E6%B5%8B%E8%AF%95%E6%9C%9F%E4%B8%AD%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0.html">软件验证与测试期中复习笔记</a>
                </li>
              
            
              
                <li class="list-group-item">
                  <a href="/2019/10/28/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%AF%BC%E8%AE%BA%E6%9C%9F%E4%B8%AD%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0.html">计算机系统导论期中复习笔记</a>
                </li>
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
        </ul>
      </div>
    </div>
  </div>
</div>

      </div>
    </main>
    <footer>
  <div class="container">
    <div class="divider"></div>
    <div class="row footer-content">
      <div class="col-md col-left">
        <i class="fas fa-paint-brush icon"></i>
        <span>Designed by shuq3 & An0nym6</span>
      </div>
      <div class="col-md col-middle">
        <i class="fab fa-github icon"></i>
        <a href="https://github.com/An0nym6">An0nym6</a>
      </div>
      <div class="col-md col-right">
        <i class="fas fa-envelope icon"></i>
        <a href="mailto:liuren6@gmail.com">liuren6@gmail.com</a>
      </div>
    </div>
  </div>
</footer>

  </body>
</html>
